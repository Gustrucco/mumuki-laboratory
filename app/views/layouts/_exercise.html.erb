<% @stats = @exercise.guide.stats_for(current_user) if current_user && @exercise.guide %>


<div class="row">
  <div class="col-md-12">
    <h1 style="display: inline-block">
      <%= @exercise.contextualized_name %>
      <%= language_icon @exercise.language %>
    </h1>
    <span style="margin-left: 5px">
      <a data-toggle="collapse" href="#about-section" class="text-info">
        <%= fa_icon 'info-circle' %> <%= t :about %>
      </a>
    </span>

  </div>
</div>

<div>
  <div id="about-section" class="collapse">
    <ul>
      <li><%= t :language %>: <%= @exercise.language %></li>
      <li><%= t :created_at %>: <%= time_ago_in_words @exercise.created_at %></li>
      <li><%= t :status %>: <%= exercise_status_icon(@exercise) %></li>
      <li><%= t :tag %>: <%= link_to_tag_list(@exercise.tag_list) %></li>
    </ul>
  </div>
</div>

<div>
  <p>
    <%= previous_nav_button(@exercise) %>
    <span data-toggle="popover"
          title="<%= @exercise.guide.name %>"
          data-content="<%= @exercise.guide.description_html.to_str %>">
            <%= link_to_guide(@exercise.guide) %>
          </span>
    <%= next_nav_button(@exercise) %>
  </p>
</div>


<div>
  <% if @stats %>
    <%= render partial: 'layouts/progress_bar', locals: {guide: @exercise.guide, stats: @stats} %>
  <% else %>
    <hr>
  <% end %>
</div>

<div>
  <%= yield %>
</div>

