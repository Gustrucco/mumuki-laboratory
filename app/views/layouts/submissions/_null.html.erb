<div class="row">
  <div class="col-md-12 exercise-assignment">
    <div>
      <%= @exercise.description_html %>
    </div>
    <div>
      <% if @exercise.hint.present? %>
        <a data-toggle="collapse" href="#hint-section" class="text-info">
          <%= fa_icon 'question-circle' %> <%= t :need_a_hint %>
        </a>

        <div id="hint-section" class="collapse">
          <p>
            <%= @exercise.hint_html %>
          </p>
        </div>
      <% end %>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-12 ace-editor-col">
    <% if current_user? %>
      <%= form_for([@exercise, @submission], remote: true, html: {role: 'form'}) do |f| %>
        <div class="field form-group">
          <%= f.text_area :content, class: 'form-control', value: @previous_submission_content, style: 'display: none' %>
        </div>
        <div class="actions">
          <%= button_tag (fa_icon :play, text: t(:create_submission)),
                         class: 'btn btn-primary',
                         data: {disable_with: "#{fa_icon 'refresh spin', text: t(:sending_solution)}", normal_text: t(:create_submission)} %>
        </div>
      <% end %>
    <% else %>
      <p><%= t :you_must_sign_in_before_submitting %></p>

      <div class="actions">
        <%= login_anchor class: 'btn btn-primary' %>
      </div>
    <% end %>
  </div>
</div>
<% if current_user? %>
  <div class="row">
    <div class="col-md-12 submission-results">
      <% if @exercise.last_submission(current_user) %>
        <%= render partial: 'exercise_submissions/results', locals: {submission: @exercise.last_submission(current_user)} %>
      <% end %>
    </div>
  </div>
<% end %>
